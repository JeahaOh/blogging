# RESTful API 설계 가이드: 제대로 이해하고 잘 만들자!

RESTful API는 현대 웹 및 모바일 애플리케이션의 핵심 통신 방식입니다. 많은 개발자들이 API를 “그냥 HTTP로 만들어진 것”이라고 생각하지만, REST의 개념과 원칙을 제대로 이해하고 설계하면, 시스템의 확장성, 유지보수성, 보안성이 크게 향상됩니다. 이 글에서는 RESTful API의 기본 개념부터 설계 방법까지 자세히 다루어, 지금까지 잘못 만든 API를 개선하고자 하는 분들께 도움이 되고자 합니다.

---

## 🔍 RESTful API란?

### 1. 개념 정의

- **REST(Representational State Transfer)**는 웹의 아키텍처 스타일 중 하나로, 자원을 중심으로 상태를 표현하고 전이시키는 방법입니다.
- 자원(Resource) : API가 다루는 대상(예: 사용자, 상품, 주문 등)은 고유한 URI를 통해 식별됩니다.
- 표현(Representation) : 자원의 상태는 JSON, XML 등으로 표현됩니다.

### 2. REST의 6가지 제약 조건

RESTful API를 설계할 때 지켜야 하는 핵심 제약 조건은 다음과 같습니다:

1. 클라이언트-서버 :  
  **클라이언트와 서버의 역할을 명확히 분리**하여, 클라이언트는 UI/UX에, 서버는 데이터와 비즈니스 로직에 집중합니다.
2. 무상태(Stateless) :  
  **각 요청은 독립적**이어야 하며, 서버는 이전 요청의 상태를 저장하지 않습니다. 필요한 모든 정보는 요청에 포함되어야 합니다.
3. 캐시 가능(Cacheable) :   
  응답은 캐시 가능해야 하며, **적절한 캐시 헤더를 통해 성능을 최적화**할 수 있습니다.
4. 일관된 인터페이스(Uniform Interface) :  
  API의 모든 상호작용은 일관된 방식으로 진행되어야 합니다. 이를 위해 URI는 명사 형태, HTTP 메서드(GET, POST, PUT, DELETE)를 사용합니다.
5. 계층화 시스템(Layered System) :  
  클라이언트는 서버의 내부 구현(프록시, 게이트웨이 등)을 알 필요 없이 API와 상호작용할 수 있어야 합니다.
6. 코드 온디맨드(Code on Demand) – 선택 사항 :  
  서버가 클라이언트에 실행 가능한 코드를 전송할 수 있으나, 일반적으로는 사용하지 않습니다.

---

## 🔍 RESTful API 설계 방법 및 규칙

### **1. ⭐ 자원 중심 설계 (Resource-Oriented Design) ⭐**

- URI 설계 : 자원을 식별하는 URI는 명사 형태로 구성합니다.
  - 예) `/users` (전체 사용자), `/users/{userId}` (특정 사용자)
- CRUD 작업: HTTP 메서드를 사용해 자원에 대한 작업을 표현합니다.
  - `GET    /users` : 사용자 조회
  - `POST   /users` : 사용자 생성
  - `PUT    /users/{userId}` : 사용자 전체 업데이트
  - `PATCH  /users/{userId}` : 사용자 일부 업데이트
  - `DELETE /users/{userId}` : 사용자 삭제

### **2. ⭐ HTTP 메소드 사용 용도 ⭐**

| HTTP 메서드 | 용도       | 설명                                                                                                    | 멱등성(Idempotence)         |
|------------|---------|--------------------------------------------------------------------------------------------------------|-----------------------------|
| GET       | 조회       | 리소스(데이터)를 조회하여 클라이언트에게 반환합니다. 요청 시 서버의 상태를 변경하지 않습니다.                                 | 보장 (같은 요청은 항상 같은 결과) |
| POST      | 생성       | 새로운 리소스를 생성할 때 사용합니다. 요청 본문에 생성할 데이터(페이로드)를 포함시킵니다.                                    | 보장되지 않음              |
| PUT       | 전체 수정   | 기존 리소스를 완전히 대체하여 업데이트합니다. 전체 리소스 데이터를 제공해야 하며, 요청을 여러 번 보내도 동일한 결과가 나옵니다.       | 보장 (동일 요청 시 결과가 동일)  |
| PATCH     | 부분 수정   | 기존 리소스의 일부 속성만 수정합니다. 전체 리소스를 대체하지 않고, 필요한 부분만 업데이트할 때 사용합니다.                       | 보장되지 않을 수 있음       |
| DELETE    | 삭제       | 지정된 리소스를 삭제합니다. 삭제 작업은 리소스를 완전히 제거하는 작업입니다.                                              | 보장 (동일 요청 시 결과가 동일)  |

### **3. ⭐ HTTP 상태 코드 활용 ⭐**

- `200 OK` : 요청 성공 (데이터 반환)
- `201 Created` : 새로운 자원 생성 성공
- `204 No Content` : 삭제나 업데이트 성공, 응답 본문 없음
- `400 Bad Request` : 클라이언트 요청 오류
- `401 Unauthorized/403 Forbidden` : 인증/권한 문제
- `404 Not Found` : 자원 미발견
- `500 Internal Server Error` : 서버 오류

### 4. 📌 데이터 포맷 및 버전 관리

- 데이터 포맷 : 주로 JSON을 사용합니다.
- API 버전 관리 : URI에 버전 정보를 포함하거나, 헤더를 통해 버전을 관리합니다.
  - 예: /v1/users 또는 Accept: application/vnd.example.v1+json

### 5. 🔒 보안 고려사항

- 인증 및 인가 : JWT, OAuth 등 보안 토큰을 사용해 접근을 제어합니다.
- HTTPS : 모든 통신은 HTTPS를 통해 암호화하여 안전하게 전송합니다.

### 6. 📝 문서화

- Swagger/OpenAPI : API 문서를 자동으로 생성하고, 협업 및 외부 개발자와 공유합니다.
- Postman Collection : 테스트 및 문서화 도구로 활용하여 API 사용법을 쉽게 전달할 수 있습니다.

---

## 🔍 RESTful API 설계 예시

예시 : 사용자 관리 API
- `GET /v1/users` : 전체 사용자 조회
  - 응답 : `[{"id":1, "name":"Alice", "email":"alice@example.com"}, ...]`
- `GET /v1/users/{userId}` : 특정 사용자 조회
  - 응답 : `{"id":1, "name":"Alice", "email":"alice@example.com"}`
- `POST /v1/users` : 사용자 생성
  - 요청 본문 : `{"name":"Bob", "email":"bob@example.com"}`
  - 응답 : 201 Created와 함께 새 자원의 URI 반환
- `PUT /v1/users/{userId}` : 전체 업데이트
- `PATCH /v1/users/{userId}` : 부분 업데이트
- `DELETE /v1/users/{userId}` : 사용자 삭제
  - 응답 : 204 No Content

---

## ⚡ RESTful API 설계 시 유의사항

- 일관성 유지 : API 전반에 걸쳐 일관된 URI 구조, 메서드 사용, 상태 코드 활용.
- 확장성 고려 : 미래에 자원이 늘어나거나, 기능이 확장될 때에도 쉽게 관리할 수 있도록 설계.
- 에러 핸들링 : 명확한 에러 메시지와 상태 코드를 제공해 클라이언트가 문제를 쉽게 파악할 수 있도록 합니다.
- 보안 강화 : 인증, 인가, HTTPS 적용 등 보안 측면을 항상 최우선으로 고려.
- 문서화 필수 : 잘 작성된 API 문서는 개발자와 사용자가 API를 쉽게 이해하고 활용할 수 있도록 돕습니다.

---

## 💡 결론

RESTful API는 자원을 중심으로 설계된 웹 서비스로, HTTP의 기본 원칙을 활용해 확장성과 유지보수성이 뛰어난 시스템을 만들 수 있습니다.
올바른 URI 설계, HTTP 메서드의 적절한 활용, 명확한 에러 처리 및 보안 강화를 통해 API의 일관성과 신뢰성을 높일 수 있으며, Swagger 같은 도구를 활용해 문서화를 철저히 하는 것이 성공적인 RESTful API 설계의 핵심입니다.
